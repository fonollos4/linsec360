Démarrage du déploiement à 2025-07-25 13:12:23.985633
Commande: ansible-playbook -i /opt/linsec/taskengine/inventories/production/hosts.yml /opt/linsec/taskengine/playbooks/wazuh-agent.yml --extra-vars @/opt/linsec/logs/env-20250725131223.yml --extra-vars @/opt/linsec/logs/hosts-20250725131223.yml --limit test

[WARNING]: Failed to create the directory '/home/linsecagent/.ansible': [Errno
2] No such file or directory: '/home/linsecagent/.ansible'
ERROR! We were unable to read either as JSON nor YAML, these are the errors we got from each:
JSON: Expecting value: line 1 column 1 (char 0)

Syntax Error while loading YAML.
  found unacceptable key (unhashable type: 'AnsibleMapping'). while constructing a mapping
  in "<unicode string>", line 2, column 10
found unacceptable key (unhashable type: 'AnsibleMapping')
  in "<unicode string>", line 2, column 11

The error appears to be in '/opt/linsec/taskengine/playbooks/wazuh-agent.yml': line 2, column 11, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:

---
- hosts: {{ servernames }}
          ^ here
We could be wrong, but this one looks like it might be an issue with
missing quotes. Always quote template expression brackets when they
start a value. For instance:

    with_items:
      - {{ foo }}

Should be written as:

    with_items:
      - "{{ foo }}"


Déploiement terminé à 2025-07-25 13:12:25.083923
Code de sortie: 4

ERREUR: Working outside of application context.

This typically means that you attempted to use functionality that needed
the current application. To solve this, set up an application context
with app.app_context(). See the documentation for more information.